# -*- coding: UTF-8 -*-

PUNCTUATIONS_r = \
    u""":
    •
    §
    ’
    '
    _
    !
    @
    $
    %
    ^
    *"""

SEPARATER_r = \
    u"""&
    “
    ”
    ‘
    "
    —
    –
    −
    -
    (
    )
    .
    ,
    <
    >
    /
    ?
    \
    [
    ]
    {
    }
    +"""

STOP_WORDS_r = \
    u"""a
    about
    above
    after
    again
    against
    all
    am
    an
    and
    any
    are
    arent
    as
    at
    be
    because
    been
    before
    being
    below
    between
    both
    but
    by
    cant
    cannot
    could
    couldnt
    did
    didnt
    do
    does
    doesnt
    doing
    dont
    down
    during
    each
    few
    for
    from
    further
    had
    hadnt
    has
    hasnt
    have
    havent
    having
    he
    hed
    hell
    hes
    her
    here
    heres
    hers
    herself
    him
    himself
    his
    how
    hows
    i
    id
    im
    ive
    ii
    iii
    iv
    vi
    vii
    viii
    ix
    if
    in
    into
    is
    isnt
    it
    its
    its
    itself
    lets
    me
    more
    most
    mustnt
    my
    myself
    no
    nor
    not
    of
    off
    on
    once
    only
    or
    other
    ought
    our
    ours	ourselves
    out
    over
    own
    same
    shant
    she
    shed
    shes
    should
    shouldnt
    so
    some
    such
    than
    that
    thats
    the
    their
    theirs
    them
    themselves
    then
    there
    theres
    these
    they
    theyd
    theyll
    theyre
    theyve
    this
    those
    through
    to
    too
    under
    until
    up
    very
    was
    wasnt
    we
    wed
    were
    weve
    were
    werent
    what
    whats
    when
    whens
    where
    wheres
    which
    while
    who
    whos
    whom
    why
    whys
    with
    wont
    would
    wouldnt
    you
    youd
    youll
    youre
    youve
    your
    yours
    yourself
    yourselves
    as
    able
    about
    above
    according
    accordingly
    across
    actually
    after
    afterwards
    again
    against
    aint
    all
    allow
    allows
    almost
    alone
    along
    already
    also
    although
    always
    am
    among
    amongst
    an
    and
    another
    any
    anybody
    anyhow
    anyone
    anything
    anyway
    anyways
    anywhere
    apart
    appear
    appreciate
    appropriate
    are
    arent
    around
    as
    aside
    ask
    asking
    associated
    at
    available
    away
    awfully
    be
    became
    because
    become
    becomes
    becoming
    been
    before
    beforehand
    behind
    being
    believe
    below
    beside
    besides
    best
    better
    between
    beyond
    both
    brief
    but
    by
    cmon
    cs
    came
    can
    cant
    cannot
    cant
    cause
    causes
    certain
    certainly
    changes
    clearly
    co
    com
    come
    comes
    concerning
    consequently
    consider
    considering
    contain
    containing
    contains
    corresponding
    could
    couldnt
    course
    currently
    definitely
    described
    despite
    did
    didnt
    different
    do
    does
    doesnt
    doing
    dont
    done
    down
    downwards
    during
    each
    edu
    eg
    eight
    either
    else
    elsewhere
    enough
    entirely
    especially
    et
    etc
    even
    ever
    every
    everybody
    everyone
    everything
    everywhere
    ex
    exactly
    example
    except
    far
    few
    fifth
    first
    five
    followed
    following
    follows
    for
    former
    formerly
    forth
    four
    from
    further
    furthermore
    get
    gets
    getting
    given
    gives
    go
    goes
    going
    gone
    got
    gotten
    greetings
    had
    hadnt
    happens
    hardly
    has
    hasnt
    have
    havent
    having
    he
    hes
    hello
    help
    hence
    her
    here
    heres
    hereafter
    hereby
    herein
    hereupon
    hers
    herself
    hi
    him
    himself
    his
    hither
    hopefully
    how
    howbeit
    however
    id
    im
    ive
    ie
    if
    ignored
    immediate
    in
    inasmuch
    inc
    indeed
    indicate
    indicated
    indicates
    inner
    insofar
    instead
    into
    inward
    is
    isnt
    it
    itd
    itll
    its
    its
    itself
    just
    keep
    keeps
    kept
    know
    known
    knows
    last
    lately
    later
    latter
    latterly
    least
    less
    lest
    let
    lets
    like
    liked
    likely
    little
    look
    looking
    looks
    ltd
    mainly
    many
    may
    maybe
    me
    mean
    meanwhile
    merely
    might
    more
    moreover
    most
    mostly
    much
    must
    my
    myself
    name
    namely
    nd
    near
    nearly
    necessary
    need
    needs
    neither
    never
    nevertheless
    new
    next
    nine
    no
    nobody
    non
    none
    noone
    nor
    normally
    not
    nothing
    novel
    now
    nowhere
    obviously
    of
    off
    often
    oh
    ok
    okay
    old
    on
    once
    one
    ones
    only
    onto
    or
    other
    others
    otherwise
    ought
    our
    ours
    ourselves
    out
    outside
    over
    overall
    own
    particular
    particularly
    per
    perhaps
    placed
    please
    plus
    possible
    presumably
    probably
    provides
    que
    quite
    qv
    rather
    rd
    re
    really
    reasonably
    regarding
    regardless
    regards
    relatively
    respectively
    right
    said
    same
    saw
    say
    saying
    says
    second
    secondly
    see
    seeing
    seem
    seemed
    seeming
    seems
    seen
    self
    selves
    sensible
    sent
    serious
    seriously
    seven
    several
    shall
    she
    should
    shouldnt
    since
    six
    so
    some
    somebody
    somehow
    someone
    something
    sometime
    sometimes
    somewhat
    somewhere
    soon
    sorry
    specified
    specify
    specifying
    still
    sub
    such
    sup
    sure
    ts
    take
    taken
    tell
    tends
    th
    than
    thank
    thanks
    thanx
    that
    thats
    thats
    the
    their
    theirs
    them
    themselves
    then
    thence
    there
    theres
    thereafter
    thereby
    therefore
    therein
    theres
    thereupon
    these
    they
    theyd
    theyll
    theyre
    theyve
    think
    third
    this
    thorough
    thoroughly
    those
    though
    three
    through
    throughout
    thru
    thus
    to
    together
    too
    took
    toward
    towards
    tried
    tries
    truly
    try
    trying
    twice
    two
    un
    under
    unfortunately
    unless
    unlikely
    until
    unto
    up
    upon
    us
    use
    used
    useful
    uses
    using
    usually
    value
    various
    very
    via
    viz
    vs
    want
    wants
    was
    wasnt
    way
    we
    wed
    were
    weve
    welcome
    well
    went
    were
    werent
    what
    whats
    whatever
    when
    whence
    whenever
    where
    wheres
    whereafter
    whereas
    whereby
    wherein
    whereupon
    wherever
    whether
    which
    while
    whither
    who
    whos
    whoever
    whole
    whom
    whose
    why
    will
    willing
    wish
    with
    within
    without
    wont
    wonder
    would
    wouldnt
    yes
    yet
    you
    youd
    youll
    youre
    youve
    your
    yours
    yourself
    yourselves
    zero
    I 
    a 
    about 
    an 
    are 
    as 
    at 
    be 
    by 
    com 
    for 
    from
    how
    in 
    is 
    it 
    of 
    on 
    or 
    that
    the 
    this
    to 
    was 
    what 
    when
    where
    who 
    will 
    with
    the
    www
    a
    able
    about
    above
    abst
    accordance
    according
    accordingly
    across
    act
    actually
    added
    adj
    affected
    affecting
    affects
    after
    afterwards
    again
    against
    ah
    all
    almost
    alone
    along
    already
    also
    although
    always
    am
    among
    amongst
    an
    and
    announce
    another
    any
    anybody
    anyhow
    anymore
    anyone
    anything
    anyway
    anyways
    anywhere
    apparently
    approximately
    are
    aren
    arent
    arise
    around
    as
    aside
    ask
    asking
    at
    auth
    available
    away
    awfully
    b
    back
    be
    became
    because
    become
    becomes
    becoming
    been
    before
    beforehand
    begin
    beginning
    beginnings
    begins
    behind
    being
    believe
    below
    beside
    besides
    between
    beyond
    biol
    both
    brief
    briefly
    but
    by
    c
    ca
    came
    can
    cannot
    cant
    cause
    causes
    certain
    certainly
    co
    com
    come
    comes
    contain
    containing
    contains
    could
    couldnt
    d
    date
    did
    didnt
    different
    do
    does
    doesnt
    doing
    done
    dont
    down
    downwards
    due
    during
    e
    each
    ed
    edu
    effect
    eg
    eight
    eighty
    either
    else
    elsewhere
    end
    ending
    enough
    especially
    et
    et-al
    etc
    even
    ever
    every
    everybody
    everyone
    everything
    everywhere
    ex
    except
    f
    far
    few
    ff
    fifth
    first
    five
    fix
    followed
    following
    follows
    for
    former
    formerly
    forth
    found
    four
    from
    further
    furthermore
    g
    gave
    get
    gets
    getting
    give
    given
    gives
    giving
    go
    goes
    gone
    got
    gotten
    h
    had
    happens
    hardly
    has
    hasnt
    have
    havent
    having
    he
    hed
    hence
    her
    here
    hereafter
    hereby
    herein
    heres
    hereupon
    hers
    herself
    hes
    hi
    hid
    him
    himself
    his
    hither
    home
    how
    howbeit
    however
    hundred
    i
    id
    ie
    if
    im
    immediate
    immediately
    importance
    important
    in
    inc
    indeed
    index
    information
    instead
    into
    invention
    inward
    is
    isnt
    it
    itd
    itll
    its
    itself
    ive
    j
    just
    k
    keep	keeps
    kept
    kg
    km
    know
    known
    knows
    l
    largely
    last
    lately
    later
    latter
    latterly
    least
    less
    lest
    let
    lets
    like
    liked
    likely
    line
    little
    ll
    look
    looking
    looks
    ltd
    m
    made
    mainly
    make
    makes
    many
    may
    maybe
    me
    mean
    means
    meantime
    meanwhile
    merely
    mg
    might
    million
    miss
    ml
    more
    moreover
    most
    mostly
    mr
    mrs
    much
    mug
    must
    my
    myself
    n
    na
    name
    namely
    nay
    nd
    near
    nearly
    necessarily
    necessary
    need
    needs
    neither
    never
    nevertheless
    new
    next
    nine
    ninety
    no
    nobody
    non
    none
    nonetheless
    noone
    nor
    normally
    nos
    not
    noted
    nothing
    now
    nowhere
    o
    obtain
    obtained
    obviously
    of
    off
    often
    oh
    ok
    okay
    old
    omitted
    on
    once
    one
    ones
    only
    onto
    or
    ord
    other
    others
    otherwise
    ought
    our
    ours
    ourselves
    out
    outside
    over
    overall
    owing
    own
    p
    page
    pages
    part
    particular
    particularly
    past
    per
    perhaps
    placed
    please
    plus
    poorly
    possible
    possibly
    potentially
    pp
    predominantly
    present
    previously
    primarily
    probably
    promptly
    proud
    provides
    put
    q
    que
    quickly
    quite
    qv
    r
    ran
    rather
    rd
    re
    readily
    really
    recent
    recently
    ref
    refs
    regarding
    regardless
    regards
    related
    relatively
    research
    respectively
    resulted
    resulting
    results
    right
    run
    s
    said
    same
    saw
    say
    saying
    says
    sec
    section
    see
    seeing
    seem
    seemed
    seeming
    seems
    seen
    self
    selves
    sent
    seven
    several
    shall
    she
    shed
    shell
    shes
    should
    shouldnt
    show
    showed
    shown
    showns
    shows
    significant
    significantly
    similar
    similarly
    since
    six
    slightly
    so
    some
    somebody
    somehow
    someone
    somethan
    something
    sometime
    sometimes
    somewhat
    somewhere
    soon
    sorry
    specifically
    specified
    specify
    specifying
    still
    stop
    strongly
    sub
    substantially
    successfully
    such
    sufficiently
    suggest
    sup
    sure	t
    take
    taken
    taking
    tell
    tends
    th
    than
    thank
    thanks
    thanx
    that
    thatll
    thats
    thatve
    the
    their
    theirs
    them
    themselves
    then
    thence
    there
    thereafter
    thereby
    thered
    therefore
    therein
    therell
    thereof
    therere
    theres
    thereto
    thereupon
    thereve
    these
    they
    theyd
    theyll
    theyre
    theyve
    think
    this
    those
    thou
    though
    thoughh
    thousand
    throug
    through
    throughout
    thru
    thus
    til
    tip
    to
    together
    too
    took
    toward
    towards
    tried
    tries
    truly
    try
    trying
    ts
    twice
    two
    u
    un
    under
    unfortunately
    unless
    unlike
    unlikely
    until
    unto
    up
    upon
    ups
    us
    use
    used
    useful
    usefully
    usefulness
    uses
    using
    usually
    v
    value
    various
    ve
    very
    via
    viz
    vol
    vols
    vs
    w
    want
    wants
    was
    wasnt
    way
    we
    wed
    welcome
    went
    were
    werent
    weve
    what
    whatever
    whatll
    whats
    when
    whence
    whenever
    where
    whereafter
    whereas
    whereby
    wherein
    wheres
    whereupon
    wherever
    whether
    which
    while
    whim
    whither
    who
    whod
    whoever
    whole
    wholl
    whom
    whomever
    whos
    whose
    why
    widely
    willing
    wish
    with
    within
    without
    wont
    words
    world
    would
    wouldnt
    www
    x
    y
    yes
    yet
    you
    youd
    youll
    your
    youre
    yours
    yourself
    yourselves
    youve
    z
    zero"""

from nltk.stem.porter import PorterStemmer

# http://stackoverflow.com/questions/26126442/
STEMMER = PorterStemmer()
STEM_S_FORBID = set(["analysis", "series"])
STEM_ES_ENDING = set(["oes", "ses", "xes"])
PUNCTUATIONS = PUNCTUATIONS_r.split()
SEPARATER = SEPARATER_r.split()
STOP_WORDS = set(STOP_WORDS_r.split())

# naive stemming here
def stem(w):
  if w[-3:] in STEM_ES_ENDING:
    w = w[:-2]
  elif w[-1] == "s" and w[-4:] != "less" and w[-3:] != "ies" \
       and w[-2:] != "us" and w[-2:] != "ss" \
       and w not in STEM_S_FORBID:
    w = w[:-1]
  return w

def stems(words):
  # NTLK return unreadable words..
  # return [stemmer.stem(w) for w in words]
  return [stem(w) for w in words]

def simpl_stopwords_split(s):
  for punc in PUNCTUATIONS:
    s = s.replace(punc, "")
  for sep in SEPARATER:
    s = s.replace(sep, " ")
  return [w for w in s.split() if not (w in STOP_WORDS or w.isdigit())]
